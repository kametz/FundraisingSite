!function($,t,i,e){"use strict";Foundation.libs.clearing={name:"clearing",version:"5.5.2",settings:{templates:{viewing:'<a href="#" class="clearing-close">&times;</a><div class="visible-img" style="display: none"><div class="clearing-touch-label"></div><img src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" alt="" /><p class="clearing-caption"></p><a href="#" class="clearing-main-prev"><span></span></a><a href="#" class="clearing-main-next"><span></span></a></div><img class="clearing-preload-next" style="display: none" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" alt="" /><img class="clearing-preload-prev" style="display: none" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" alt="" />'},close_selectors:".clearing-close, div.clearing-blackout",open_selectors:"",skip_selector:"",touch_label:"",init:!1,locked:!1},init:function(t,i,e){var n=this;Foundation.inherit(this,"throttle image_loaded"),this.bindings(i,e),n.S(this.scope).is("["+this.attr_name()+"]")?this.assemble(n.S("li",this.scope)):n.S("["+this.attr_name()+"]",this.scope).each(function(){n.assemble(n.S("li",this))})},events:function(e){var n=this,a=n.S,s=$(".scroll-container");s.length>0&&(this.scope=s),a(this.scope).off(".clearing").on("click.fndtn.clearing","ul["+this.attr_name()+"] li "+this.settings.open_selectors,function(t,i,e){var i=i||a(this),e=e||i,s=i.next("li"),r=i.closest("["+n.attr_name()+"]").data(n.attr_name(!0)+"-init"),l=a(t.target);t.preventDefault(),r||(n.init(),r=i.closest("["+n.attr_name()+"]").data(n.attr_name(!0)+"-init")),e.hasClass("visible")&&i[0]===e[0]&&s.length>0&&n.is_open(i)&&(e=s,l=a("img",e)),n.open(l,i,e),n.update_paddles(e)}).on("click.fndtn.clearing",".clearing-main-next",function(t){n.nav(t,"next")}).on("click.fndtn.clearing",".clearing-main-prev",function(t){n.nav(t,"prev")}).on("click.fndtn.clearing",this.settings.close_selectors,function(t){Foundation.libs.clearing.close(t,this)}),$(i).on("keydown.fndtn.clearing",function(t){n.keydown(t)}),a(t).off(".clearing").on("resize.fndtn.clearing",function(){n.resize()}),this.swipe_events(e)},swipe_events:function(t){var i=this,n=i.S;n(this.scope).on("touchstart.fndtn.clearing",".visible-img",function(t){t.touches||(t=t.originalEvent);var i={start_page_x:t.touches[0].pageX,start_page_y:t.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:e};n(this).data("swipe-transition",i),t.stopPropagation()}).on("touchmove.fndtn.clearing",".visible-img",function(t){if(t.touches||(t=t.originalEvent),!(t.touches.length>1||t.scale&&1!==t.scale)){var e=n(this).data("swipe-transition");if("undefined"==typeof e&&(e={}),e.delta_x=t.touches[0].pageX-e.start_page_x,Foundation.rtl&&(e.delta_x=-e.delta_x),"undefined"==typeof e.is_scrolling&&(e.is_scrolling=!!(e.is_scrolling||Math.abs(e.delta_x)<Math.abs(t.touches[0].pageY-e.start_page_y))),!e.is_scrolling&&!e.active){t.preventDefault();var a=e.delta_x<0?"next":"prev";e.active=!0,i.nav(t,a)}}}).on("touchend.fndtn.clearing",".visible-img",function(t){n(this).data("swipe-transition",{}),t.stopPropagation()})},assemble:function(t){var i=t.parent();if(!i.parent().hasClass("carousel")){i.after('<div id="foundationClearingHolder"></div>');var e=i.detach(),n="";if(null!=e[0]){n=e[0].outerHTML;var a=this.S("#foundationClearingHolder"),s=i.data(this.attr_name(!0)+"-init"),r={grid:'<div class="carousel">'+n+"</div>",viewing:s.templates.viewing},l='<div class="clearing-assembled"><div>'+r.viewing+r.grid+"</div></div>",c=this.settings.touch_label;Modernizr.touch&&(l=$(l).find(".clearing-touch-label").html(c).end()),a.after(l).remove()}}},open:function(t,e,n){function a(){setTimeout(function(){this.image_loaded(h,function(){1!==h.outerWidth()||u?s.call(this,h):a.call(this)}.bind(this))}.bind(this),100)}function s(t){var i=$(t);i.css("visibility","visible"),i.trigger("imageVisible"),l.css("overflow","hidden"),c.addClass("clearing-blackout"),o.addClass("clearing-container"),g.show(),this.fix_height(n).caption(r.S(".clearing-caption",g),r.S("img",n)).center_and_label(t,d).shift(e,n,function(){n.closest("li").siblings().removeClass("visible"),n.closest("li").addClass("visible")}),g.trigger("opened.fndtn.clearing")}var r=this,l=$(i.body),c=n.closest(".clearing-assembled"),o=r.S("div",c).first(),g=r.S(".visible-img",o),h=r.S("img",g).not(t),d=r.S(".clearing-touch-label",o),u=!1,f={};$("body").on("touchmove",function(t){t.preventDefault()}),h.error(function(){u=!0}),this.locked()||(g.trigger("open.fndtn.clearing"),f=this.load(t),f.interchange?h.attr("data-interchange",f.interchange).foundation("interchange","reflow"):h.attr("src",f.src).attr("data-interchange",""),h.css("visibility","hidden"),a.call(this))},close:function(t,e){t.preventDefault();var n=function(t){return/blackout/.test(t.selector)?t:t.closest(".clearing-blackout")}($(e)),a=$(i.body),s,r;return e===t.target&&n&&(a.css("overflow",""),s=$("div",n).first(),r=$(".visible-img",s),r.trigger("close.fndtn.clearing"),this.settings.prev_index=0,$("ul["+this.attr_name()+"]",n).attr("style","").closest(".clearing-blackout").removeClass("clearing-blackout"),s.removeClass("clearing-container"),r.hide(),r.trigger("closed.fndtn.clearing")),$("body").off("touchmove"),!1},is_open:function(t){return t.parent().prop("style").length>0},keydown:function(t){var i=$(".clearing-blackout ul["+this.attr_name()+"]"),e=this.rtl?37:39,n=this.rtl?39:37,a=27;t.which===e&&this.go(i,"next"),t.which===n&&this.go(i,"prev"),t.which===a&&this.S("a.clearing-close").trigger("click.fndtn.clearing")},nav:function(t,i){var e=$("ul["+this.attr_name()+"]",".clearing-blackout");t.preventDefault(),this.go(e,i)},resize:function(){var t=$("img",".clearing-blackout .visible-img"),i=$(".clearing-touch-label",".clearing-blackout");t.length&&(this.center_and_label(t,i),t.trigger("resized.fndtn.clearing"))},fix_height:function(t){var i=t.parent().children(),e=this;return i.each(function(){var t=e.S(this),i=t.find("img");t.height()>i.outerHeight()&&t.addClass("fix-height")}).closest("ul").width(100*i.length+"%"),this},update_paddles:function(t){t=t.closest("li");var i=t.closest(".carousel").siblings(".visible-img");t.next().length>0?this.S(".clearing-main-next",i).removeClass("disabled"):this.S(".clearing-main-next",i).addClass("disabled"),t.prev().length>0?this.S(".clearing-main-prev",i).removeClass("disabled"):this.S(".clearing-main-prev",i).addClass("disabled")},center_and_label:function(t,i){return i.css(!this.rtl&&i.length>0?{marginLeft:-(i.outerWidth()/2),marginTop:-(t.outerHeight()/2)-i.outerHeight()-10}:{marginRight:-(i.outerWidth()/2),marginTop:-(t.outerHeight()/2)-i.outerHeight()-10,left:"auto",right:"50%"}),this},load:function(t){var i,e,n;return"A"===t[0].nodeName?(i=t.attr("href"),e=t.data("clearing-interchange")):(n=t.closest("a"),i=n.attr("href"),e=n.data("clearing-interchange")),this.preload(t),{src:i?i:t.attr("src"),interchange:i?e:t.data("clearing-interchange")}},preload:function(t){this.img(t.closest("li").next(),"next").img(t.closest("li").prev(),"prev")},img:function(t,i){if(t.length){var e=$(".clearing-preload-"+i),n=this.S("a",t),a,s,r;n.length?(a=n.attr("href"),s=n.data("clearing-interchange")):(r=this.S("img",t),a=r.attr("src"),s=r.data("clearing-interchange")),s?e.attr("data-interchange",s):(e.attr("src",a),e.attr("data-interchange",""))}return this},caption:function(t,i){var e=i.attr("data-caption");return e?t.html(e).show():t.text("").hide(),this},go:function(t,i){var e=this.S(".visible",t),n=e[i]();this.settings.skip_selector&&0!=n.find(this.settings.skip_selector).length&&(n=n[i]()),n.length&&this.S("img",n).trigger("click.fndtn.clearing",[e,n]).trigger("change.fndtn.clearing")},shift:function(t,i,e){var n=i.parent(),a=this.settings.prev_index||i.index(),s=this.direction(n,t,i),r=this.rtl?"right":"left",l=parseInt(n.css("left"),10),c=i.outerWidth(),o,g={};i.index()===a||/skip/.test(s)?/skip/.test(s)&&(o=i.index()-this.settings.up_count,this.lock(),o>0?(g[r]=-(o*c),n.animate(g,300,this.unlock())):(g[r]=0,n.animate(g,300,this.unlock()))):/left/.test(s)?(this.lock(),g[r]=l+c,n.animate(g,300,this.unlock())):/right/.test(s)&&(this.lock(),g[r]=l-c,n.animate(g,300,this.unlock())),e()},direction:function(t,i,e){var n=this.S("li",t),a=n.outerWidth()+n.outerWidth()/4,s=Math.floor(this.S(".clearing-container").outerWidth()/a)-1,r=n.index(e),l;return this.settings.up_count=s,l=this.adjacent(this.settings.prev_index,r)?r>s&&r>this.settings.prev_index?"right":r>s-1&&r<=this.settings.prev_index?"left":!1:"skip",this.settings.prev_index=r,l},adjacent:function(t,i){for(var e=i+1;e>=i-1;e--)if(e===t)return!0;return!1},lock:function(){this.settings.locked=!0},unlock:function(){this.settings.locked=!1},locked:function(){return this.settings.locked},off:function(){this.S(this.scope).off(".fndtn.clearing"),this.S(t).off(".fndtn.clearing")},reflow:function(){this.init()}}}(jQuery,window,window.document);